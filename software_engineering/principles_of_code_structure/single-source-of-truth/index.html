<!DOCTYPE html>
<html lang="en">

  <head>
    <title>Single Source Of Truth | Explicator</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/../../essay.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet"> 
  </head>
  
  <body>
  
    
    

    <header style="background: steelblue">
      <h1 class="title">Single Source Of Truth</h1>
      <p class="subtitle"><strong>2025-04-23</strong></p>
    </header>

    <nav>
      <h3 style="text-align: center;">Navigation Links</h3>
    
      
      <p><a style="padding-left: 1em;" href="https://natlund.github.io/">Home Page</a></p>

      
        
        <p><a style="padding-left: 2em;" href="https://natlund.github.io/software_engineering/">Software Engineering</a></p>
      
        
        <p><a style="padding-left: 3em;" href="https://natlund.github.io/software_engineering/principles_of_code_structure/">Principles Of Code Structure</a></p>
      
            
      <hr>
      
      <p><a style="padding-left: 1em;" href="https://natlund.github.io/software_engineering/principles_of_code_structure/">Principles Of Code Structure</a></p>

      <ol>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/readability/">Readability</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/elementary-code-structures/">Elementary Code Structures</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/art-of-abstraction/">The Art Of Abstraction</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/platinum-rule-of-thumb/">The Platinum Rule Of Thumb</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/separation-of-concerns/">Separation Of Concerns</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/single-source-of-truth/">Single Source Of Truth</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/separate-inherent-and-collateral-complexity/">Separate Inherent And Collateral Complexity</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/separation-of-functions-and-state/">Separation Of Functions And State</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/distinguish-algorithmlike-from-datalike-code/">Distinguish Algorithm-like From Data-like Code</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/separate-input-output-from-computation/">Separate Input&#x2F;Output From Computation</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/separate-business-logic-from-mechanical-work/">Separate Business Logic From Mechanical Work</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/collate-the-concern-of-logical-branching/">Collate The Concern Of Logical Branching</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/coupling/">Coupling</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/taxonomy-of-connections/">Taxonomy Of Connections</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/coupling-by-direct-connection/">Coupling By Direct Connection</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/coupling-by-dependency-injection/">Coupling By Dependency Injection</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/coupling-by-inheritance/">Coupling By Inheritance</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/coupling-summary/">Coupling Summary</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/coupling-modules-into-a-structure/">Coupling Modules Into A Structure</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/make-execution-flow-obvious/">Make Execution Flow Obvious</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/data-flow-should-follow-execution-flow/">Data Flow Should Follow Execution Flow</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/interfaces/">Interfaces - The Glue That Connects</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/miscellaneous-advice/">Miscellaneous Advice</a>
          </li>
        
          <li>
            <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/thinking-like-an-engineer/">Thinking Like An Engineer</a>
          </li>
        
      </ol>
      
      <hr>

      <p style="padding-left: 1em;">Single Source Of Truth</p>
    
        
        <ul>
        
            <li>
                <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/single-source-of-truth/#single-source-of-truth">Single Source Of Truth</a>
                
                    <ul>
                        
                            <li>
                                <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/single-source-of-truth/#collation-of-concerns">Collation Of Concerns</a>
                            </li>
                        
                            <li>
                                <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/single-source-of-truth/#single-source-of-truth-1">Single Source Of Truth</a>
                            </li>
                        
                            <li>
                                <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/single-source-of-truth/#similar-sources-of-truth-do-not-collate">Similar Sources Of Truth - Do Not Collate</a>
                            </li>
                        
                            <li>
                                <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/single-source-of-truth/#dry-done-right">DRY Done Right</a>
                            </li>
                        
                    </ul>
                
            </li>
        
        </ul>
        
    </nav>

    
        
    
        
    
        
    
        
    
        
    
        
           
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
          

    

    <div class="previous_next_header">
        <p>
        
            <a style="float: left;" href="https://natlund.github.io/software_engineering/principles_of_code_structure/separation-of-concerns/">Previous: Separation Of Concerns</a>
        

        
            <a style="float: right;" href="https://natlund.github.io/software_engineering/principles_of_code_structure/separate-inherent-and-collateral-complexity/">Next: Separate Inherent And Collateral Complexity</a>
        
       </p>
    </div>

    <article class="essay">
        <h1 id="single-source-of-truth">Single Source Of Truth</h1>
<h2 id="collation-of-concerns">Collation Of Concerns</h2>
<p>In the previous chapter <a href="https://natlund.github.io/software_engineering/principles_of_code_structure/separation-of-concerns/"><em>Separation Of Concerns</em></a>, we established the value of a single module of code only dealing with a single concern.</p>
<p>The complement to that is to pull all the code that deals with the same concern into a single module of code.  In other words, <em>collate</em> all the code that deals with a single concern, and put it in a single module.</p>
<p>This improves readability.  For a single given concern, the corresponding code only needs to be read <em>once</em>.  The reader will not find themselves wondering &quot;Wait, is this code essentially the same as that other block of code I read earlier?&quot;</p>
<p>A single code element that captures a single concern and is used in more than one place is known as the 'Single Source Of Truth'.  The name highlights how the structure supports the <em>correctness</em> of the code.  Robustness is improved, not just readability, as we'll illustrate in the following example.</p>
<h2 id="single-source-of-truth-1">Single Source Of Truth</h2>
<p>Consider a piece of code dealing with some important concern.  It need not be very big - for example, it could be a single configuration value, perhaps just a boolean flag.  Or it could be something bigger, such as a function that does some mathematical calculation.</p>
<p>Now consider the situation where the code is <em>duplicated</em> - there are two (or more) functionally identically pieces of code.  Now let's imagine that at some point in time, the two copies <em>diverge</em> so that they are no longer identical.  This can easily happen if, for example, one copy was updated, but the other was forgotten.  Finally, let's assume that the divergence is a <em>bug</em>, the program as a whole is no longer correct.</p>
<p>The obvious solution is to <em>not</em> have duplicates, but rather to have a single piece of code that deals with the critical concern - the Single Source Of Truth.  That way, when the concern changes in any way, code needs to be modified in only one place, and overall program consistency is always guaranteed.</p>
<h2 id="similar-sources-of-truth-do-not-collate">Similar Sources Of Truth - Do Not Collate</h2>
<p>Now consider the <em>superficially</em> similar situation: There are two (or more) functionally identical pieces of code.  But now, the two pieces of code have different <em>purposes</em> or <em>meanings</em>; they are semantically different.  In other words, from a certain point of view, the two apparently-identical pieces of code <em>do not deal with the same concern</em>.</p>
<p>This may seem very subtle and confusing - how can we tell if two apparently-identical pieces of code deal with the same concern?  The litmus test is this:  Could the two pieces ever evolve in different ways so that they are no longer identical?  As the code base changes over time, could it ever be correct for the two pieces to be no longer identical?  If the answer is yes, then in the most important sense, the two pieces of code <strong>do not</strong> deal with the same concern.  Therefore, they should <strong>not</strong> be collated into a Single Source Of Truth.</p>
<p>Because this point is quite subtle, and the misleading advice &quot;Don't Repeat Yourself (DRY)&quot; is often mindlessly followed, we often see this anti-pattern of superficially identical code fragments being collated into a Single Source Of (More-Than-One)Truth.  One sign of this that the code module for the Single Source Of Truth has acquired a <em>parameter</em> or two to 'handle the different cases'.</p>
<p>A single parameterised function is generally <em>worse</em> than two separate but simple functions, even with considerable code repetition.  A parameterised function is much more onerous to test, and much harder to read and reason about.  Getting the parameter wrong for the use case is a potential bug.  So just use two simple separate functions.  Fight the demon of Abstraction Addiction!</p>
<h2 id="dry-done-right">DRY Done Right</h2>
<p>The advice in this chapter on when to abstract out a Single Source Of Truth is essentially the ideal intended outcome when the overly-simplistic advice &quot;Don't Repeat Yourself&quot; is issued.  In other words, a well-crafted Single Source Of Truth is 'DRY Done Right'.</p>
<p>To summarise:</p>
<ol>
<li>Separate Concerns in the code base, so that the code now comprises of many individually coherent code modules.</li>
<li>If two (or more) code modules appear to have identical functionality, ask the question: &quot;Could it ever be <em>correct</em> for these two modules to diverge so they are no longer identical?&quot;</li>
<li>If the answer is &quot;Yes&quot;, then leave the two code modules alone.  Do not merge them.</li>
<li>If the answer is &quot;No, for program correctness, these two code modules should always be identical&quot;, then Collate Concerns - merge the separate code modules into a Single Source Of Truth.</li>
</ol>

        
        <p style="text-align: center; font-size: 24pt;"> &#128608 </p>

    
    </article>

    <div class="previous_next_footer">
        <p>
        
            <a style="float: left;" href="https://natlund.github.io/software_engineering/principles_of_code_structure/separation-of-concerns/">Previous: Separation Of Concerns</a>
        

        
            <a style="float: right;" href="https://natlund.github.io/software_engineering/principles_of_code_structure/separate-inherent-and-collateral-complexity/">Next: Separate Inherent And Collateral Complexity</a>
        
       </p>
    </div>
    
    <div class="filler"></div>

    <footer>
      <p class="datestamp"><strong>2025-04-23</strong></p>
    </footer>
  
  </body>

</html>
